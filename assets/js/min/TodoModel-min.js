define(["app/utils"],function(t){"use strict";var o=function(t,o){this.url=t,this.socket=o,this.onChanges=[],this.todos=[]};return o.prototype.set=function(t){this.todos=t,this.inform()},o.prototype.subscribe=function(t){this.onChanges.push(t)},o.prototype.inform=function(){this.onChanges.forEach(function(t){t()})},o.prototype.addTodo=function(t){this.socket.post(this.url,t,function o(t){this.todos=this.todos.concat(t),console.log("Message posted :: ",t)}.bind(this))},o.prototype.toggleAll=function(t){this.todos.forEach(function(o){this.socket.put(this.url+"/"+o.id,{completed:t},function s(t){console.log("Message toggleAll :: ",t)})}.bind(this))},o.prototype.toggle=function(t){this.socket.put(this.url+"/"+t.id,{completed:!t.completed},function o(t){console.log("Message toggle :: ",t)})},o.prototype.destroy=function(t){this.socket["delete"](this.url+"/"+t.id,function o(t){console.log("Message destroy :: ",t)})},o.prototype.save=function(t,o){this.socket.put(this.url+"/"+t.id,{title:o},function s(t){console.log("Message save :: ",t)})},o.prototype.clearCompleted=function(){this.todos.forEach(function(t){t.completed&&this.socket["delete"](this.url+"/"+t.id,function o(t){console.log("Message destroy :: ",t)})}.bind(this))},o});